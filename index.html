<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>VR Based Education</title>
    <meta name="description" content="Web2VR">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="./assets/js/aframe.min.js"></script>
    <script src="./assets/js/quickxr.js"></script>
    <script src="./assets/js/gradientsky.min.js"></script>

    <link rel="stylesheet" href="./assets/css/style.css">
</head>

<body>
    <div id="html-container">

        <h1>VR-Based Education With STIR and TURB</h1>

        <div class="formContainer">
            <input type="text" id="videoId" placeholder="Enter Youtube Video ID" />
            <button id="submit" type="button">Submit</button>
        </div>

        <span id="liveStatus">Status: Video is now loading...</span>

        <div class="content">
            <video id="video" src="./video.mp4" width="640" height="360" controls crossorigin></video>
            <div class="questionsContainer">
                <div class="questions">
                    <span>What is the color of the star?</span>
                    <input type="text" data-id="1" placeholder="Enter Answer" />
                    <span>What are you doing right now?</span>
                    <input type="text" data-id="2" placeholder="Enter Answer" />
                    <span>What is the question?</span>
                    <input type="text" data-id="3" placeholder="Enter Answer" />
                    <span>What is the question?</span>
                    <input type="text" data-id="4" placeholder="Enter Answer" />
                    <span>What is the question?</span>
                    <input type="text" data-id="5" placeholder="Enter Answer" />
                </div>
                <button id="submitAnswer" type="button">Submit</button>
            </div>
        </div>


    </div>

    <a-scene renderer="colorManagement:true;" shadow="type: pcfsoft">
        <a-sky material="shader: gradient; topColor: 0 0 0; bottomColor: 1 41 100 ; offset: 600"
            geometry="radius: 1000"></a-sky>
    </a-scene>

    <script>
        const web2vr = new Web2VR("#html-container", {
            position: {
                x: 0,
                y: 2.1,
                z: -0.6
            },
        })
        web2vr.start()
        function deleteFormContainer() {
            let formContainer = document.querySelector(".formContainer")
            formContainer.innerHTML = ""
        }

        function videoHTML(videoId) {
            return `<video id="video" src="https://relay-youtube.cyclic.app/${videoId}" width="640" height="360" controls crossorigin></video>`
        }

        function questionsHTML(questions) {
            let html = `<div class="questionsContainer">`
            html += `<div class="questions">`
            questions.forEach((question, index) => {
                html += `<span>${question}</span>`
                html += `<input type="text" data-id="${index + 1}" placeholder="Enter Answer" />`
            })
            html += `</div>`
            html += `<button id="submitAnswer" type="button">Submit</button>`
            html += `</div>`
            return html
        }

        async function getQuestions(videoId) {
            let request = await fetch("https://youtube-questions.onrender.com", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    "youtubeVideoId": videoId
                })
            })
            let response = await request.json()
            return response
        }
    </script>
</body>

</html>